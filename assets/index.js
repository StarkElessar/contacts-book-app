(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const n of c)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(c){const n={};return c.integrity&&(n.integrity=c.integrity),c.referrerPolicy&&(n.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?n.credentials="include":c.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(c){if(c.ep)return;c.ep=!0;const n=a(c);fetch(c.href,n)}})();const B=()=>document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll('input[type="tel"]');//! Вырезаем из поля ввода буквы, пробелы и возвращаем только цифры
const e=n=>n.value.replace(/\D/g,"");//! Запрещаем вставлять буквы
const a=n=>{const o=n.target,r=e(o),l=n.clipboardData||window.clipboardData;if(l){const u=l.getData("Text");/\D/g.test(u)&&(o.value=r)}},s=n=>{const o=n.target,r=e(o);let l=o.selectionStart,u="";if(!r)return o.value="";if(o.value.length!==l){n.data&&/\D/g.test(n.data)&&(o.value=r);return}if(["8"].indexOf(r[0])>-1)r[0]==="8"&&(u="8"),r.length>1&&(u+=r.substring(1,2)+" ("),r.length>=3&&(u+=r.substring(2,4)),r.length>=5&&(u+=") "+r.substring(4,7)),r.length>=8&&(u+="-"+r.substring(7,9)),r.length>=10&&(u+="-"+r.substring(9,11));else{//! Not Belarus phone Number
u="+"+r.substring(0,12)}o.value=u};//! Очищаем поле после удаления последнего символа
const c=n=>{const o=n.target.value.replace(/\D/g,"");n.keyCode===8&&o.length===1&&(n.target.value="")};t.forEach(n=>{n.addEventListener("keydown",c),n.addEventListener("input",s,!1),n.addEventListener("paste",a,!1)})}),I=()=>{const t=document.querySelector(".header"),e=document.querySelector("[data-observ]"),a=new IntersectionObserver(([s])=>{t.classList.toggle("_sticky",!s.isIntersecting)});e&&a.observe(e)};let g;const E=new Uint8Array(16);function k(){if(!g&&(g=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!g))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g(E)}const i=[];for(let t=0;t<256;++t)i.push((t+256).toString(16).slice(1));function G(t,e=0){return i[t[e+0]]+i[t[e+1]]+i[t[e+2]]+i[t[e+3]]+"-"+i[t[e+4]]+i[t[e+5]]+"-"+i[t[e+6]]+i[t[e+7]]+"-"+i[t[e+8]]+i[t[e+9]]+"-"+i[t[e+10]]+i[t[e+11]]+i[t[e+12]]+i[t[e+13]]+i[t[e+14]]+i[t[e+15]]}const x=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),w={randomUUID:x};function H(t,e,a){if(w.randomUUID&&!t)return w.randomUUID();t=t||{};const s=t.random||(t.rng||k)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,G(s)}const O=JSON.parse(localStorage.getItem("contactsBook"))||{groups:[],contacts:[]},V=(t=O,{type:e="default",groupProps:a,contactProps:s})=>({createContact:()=>({...t,contacts:t.contacts.concat([{...s,id:Date.now()}])}),updateContact:()=>({...t,contacts:t.contacts.map(n=>n.id===s.id?{...n,...s}:n)}),removeContact:()=>({...t,contacts:t.contacts.filter(n=>n.id!==s.id)}),createGroup:()=>({...t,groups:t.groups.concat([{...a,id:H()}])}),updateGroup:()=>({...t,groups:t.groups.map(n=>n.id===a.id?{...n,...a}:n)}),removeGroup:()=>({...t,groups:t.groups.filter(n=>n.id!==a.id)}),default:()=>t})[e](),D=()=>{const t=[];let e;const a=o=>e.contacts.filter(r=>r.groupId===o),s=o=>o.forEach(r=>r()),c=o=>{e=V(e,o),s(t)},n=(...o)=>{t.push(...o),s(t)};return c({}),{get contactsBook(){return e},get contacts(){return e.contacts},get groups(){return e.groups},get groupIds(){return e.groups.map(o=>o.id)},getContactsByGroupId:a,dispatch:c,subscribe:n}},M=document.getElementById("addContactButton"),N=document.getElementById("addGroupButton"),T=document.querySelector(".contact-list__container"),m=document.getElementById("addContactSidebar"),h=document.querySelector(".new-contact__container"),_=m.querySelectorAll("input");document.querySelector(".custom-dropdown");const b=document.getElementById("button-dropdown"),L=m.querySelector(".custom-dropdown__label"),f=document.getElementById("dropdown-list"),p=document.getElementById("dropdown-input"),q=document.getElementById("saveContact"),S=document.getElementById("addGroupSidebar"),v=document.querySelector(".contacts-group__list"),A=document.querySelector(".button_add"),U=document.getElementById("saveGroup"),X=document.querySelector(".description-label"),Z=(t,e)=>Object.keys(e).forEach(a=>t.setAttribute(a,e[a])),P=(t,e)=>Object.assign(t,e),d=({type:t,attributes:e,children:a=[],...s})=>{const c=document.createElement(t);return Z(c,e),P(c,s),c.append(...a),c},C=({id:t="",name:e="",isOpened:a=!1}={})=>{const s=d({type:"input",attributes:{class:"contacts-group__input",type:"text",name:"contacts-group",placeholder:"Введите название",value:e,"data-name":e,"data-id":t,"data-isOpened":a},oninput:({target:o})=>o.setAttribute("data-name",o.value)}),c=d({type:"button",attributes:{class:"contacts-group__button-remove",type:"button"},innerHTML:`
      <svg width="16" height="20" viewBox="0 0 16 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1.66664 17.3889C1.66664 18.55 2.61664 19.5 3.77775 19.5H12.2222C13.3833 19.5 14.3333 18.55 14.3333 17.3889V4.72222H1.66664V17.3889ZM4.26331 9.87333L5.75164 8.385L7.99997 10.6228L10.2378 8.385L11.7261 9.87333L9.48831 12.1111L11.7261 14.3489L10.2378 15.8372L7.99997 13.5994L5.7622 15.8372L4.27386 14.3489L6.51164 12.1111L4.26331 9.87333ZM11.6944 1.55556L10.6389 0.5H5.36108L4.30553 1.55556H0.611084V3.66667H15.3889V1.55556H11.6944Z" fill="white" />
      </svg>
    `,onclick:({currentTarget:o})=>o.parentElement.remove()});return d({type:"li",attributes:{class:"contacts-group__item"},children:[s,c]})},$=(t,e)=>{const{id:a,name:s,groupName:c,groupId:n,phoneNumber:o}=t,r=d({type:"button",attributes:{class:"contact-list__button contact-list__button_edit",type:"button"},innerHTML:`
		    <svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
		      <path d="M0 15.25V19H3.75L14.81 7.94L11.06 4.19L0 15.25ZM17.71 5.04C18.1 4.65 18.1 4.02 17.71 3.63L15.37 1.29C14.98 0.899998 14.35 0.899998 13.96 1.29L12.13 3.12L15.88 6.87L17.71 5.04Z" fill="white"/>
		    </svg>
		`,onclick:()=>{h.dataset.id=a,_.forEach(u=>u.value=t[u.name]),L.innerText=c,p.dataset.id=n,m.classList.add("_show")}}),l=d({type:"button",attributes:{class:"contact-list__button contact-list__button_remove",type:"button"},innerHTML:`
			<svg width="16" height="20" viewBox="0 0 16 20" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M1.66664 17.3889C1.66664 18.55 2.61664 19.5 3.77775 19.5H12.2222C13.3833 19.5 14.3333 18.55 14.3333 17.3889V4.72222H1.66664V17.3889ZM4.26331 9.87333L5.75164 8.385L7.99997 10.6228L10.2378 8.385L11.7261 9.87333L9.48831 12.1111L11.7261 14.3489L10.2378 15.8372L7.99997 13.5994L5.7622 15.8372L4.27386 14.3489L6.51164 12.1111L4.26331 9.87333ZM11.6944 1.55556L10.6389 0.5H5.36108L4.30553 1.55556H0.611084V3.66667H15.3889V1.55556H11.6944Z" fill="white"/>
			</svg>
		`,onclick:()=>e({type:"removeContact",contactProps:{id:a}})});return d({type:"li",attributes:{class:"contact-list__item"},children:[r,l],innerHTML:`
			<p class="contact-list__name" name="user-name">${s||"Фамилия Имя Отчество"}</p>
			<p class="contact-list__phone" name="user-phone">${o||"+7 (XXX) XXX - XX - XX"}</p>
		`})},J=({group:t,contacts:e,dispatch:a})=>{const s=d({type:"div",attributes:{class:`contact-list__header ${t.isOpened?"_show":""}`},innerHTML:`
			<span class="contact-list__label">${t.name}</span>
			<span class="contact-list__icon">
				<svg width="13" height="8" viewBox="0 0 13 8" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M10.8849 0.294983L6.29492 4.87498L1.70492 0.294983L0.294922 1.70498L6.29492 7.70498L12.2949 1.70498L10.8849 0.294983Z" fill="black"/>
				</svg>
			</span>
		`,onclick:()=>a({type:"updateGroup",groupProps:{id:t.id,isOpened:!t.isOpened}})}),c=d({type:"div",attributes:{class:"contact-list__content",style:`height: ${t.isOpened?"max-content":0}px`},innerHTML:'<ul class="contact-list__list"></ul>'}),n=d({type:"div",attributes:{class:`contact-list__group ${t.isOpened?"_show":""}`},children:[s,c]}),o=e.map(r=>$({...r,groupName:t.name},a));return n.querySelector(".contact-list__list").append(...o),n},R=({id:t,name:e})=>d({type:"li",attributes:{class:"select-list__item"},children:[e],onclick:()=>{L.innerText=e,p.value=e,p.dataset.id=t,b.focus(),f.classList.remove("_show")}}),j=t=>{const e=()=>{const s=t.groups.map(c=>J({group:c,contacts:t.getContactsByGroupId(c.id),dispatch:t.dispatch}));T.replaceChildren(...s),X.classList.toggle("_hide",s.length),localStorage.setItem("contactsBook",JSON.stringify(t.contactsBook))},a=()=>f.replaceChildren(...t.groups.map(R));t.subscribe(e,a)},F=()=>{if(!localStorage.getItem("contactsBook")){alert("Сначала добавьте группы");return}h.dataset.id="",_.forEach(t=>t.value=""),L.innerText="Выберите группу",p.dataset.id="",m.classList.add("_show")},K=t=>()=>{const e=t.groups.map(C);v.replaceChildren(...e),S.classList.add("_show")},W=({target:t})=>{const e=t.closest(".modal"),a=t.closest(".header-modal__button-close");(t.classList.contains("modal")||a)&&e.classList.remove("_show")},z=()=>{b.classList.toggle("_active"),f.classList.toggle("_show")},Q=t=>()=>{const e=[...h.querySelectorAll("input")].map(r=>r.value);if(e.some(r=>!r)){alert("Заполните поле");return}const[a,s]=e,c=p.dataset.id,n=Number(h.dataset.id),o=n?"updateContact":"createContact";t.dispatch({type:o,contactProps:{id:n,groupId:c,name:a,phoneNumber:s}}),localStorage.setItem("contactsBook",JSON.stringify(t.contactsBook)),m.classList.remove("_show")},Y=()=>{const t=C();v.append(t)},tt=t=>()=>{const e=[...v.querySelectorAll("input")];if(e.map(o=>o.value).some(o=>!o)){alert("Заполните поле");return}const s=e.map(({dataset:{id:o,name:r,isOpened:l}})=>({id:o,name:r,isOpened:l})),c=s.map(o=>o.id);[{type:"removeGroup",groups:t.groups.filter(o=>!c.includes(o.id))},{type:"updateGroup",groups:s.filter(o=>t.groupIds.includes(o.id))},{type:"createGroup",groups:s.filter(o=>!o.id)}].forEach(({type:o,groups:r})=>r.forEach(l=>t.dispatch({type:o,groupProps:l}))),localStorage.setItem("contactsBook",JSON.stringify(t.contactsBook)),S.classList.remove("_show")},y=D();j(y);I();B();M.onclick=F;N.onclick=K(y);document.onclick=W;b.onclick=z;q.onclick=Q(y);A.onclick=Y;U.onclick=tt(y);
